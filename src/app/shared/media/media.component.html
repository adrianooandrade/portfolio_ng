<div class="media-component-wrapper">
  <div class="card card-compact w-96 bg-base-100 shadow-xl">
    <figure
      (click)="onClickMedia()"
      class="cursor-pointer relative min-h-[350px]"
    >
      <img
        (error)="onErrorLoading(true)"
        (load)="onLoadMediaPreview(true)"
        *ngIf="!hasErrorLoading"
        [alt]="description"
        [src]="imageUrl"
        loading="lazy"
      />
      <progress
        *ngIf="!hadLoadedPreviewMedia && !hasErrorLoading"
        class="progress progress-success min-w-[10rem] max-w-xs absolute top-2/4 left-1/2 transform -translate-x-1/2"
      ></progress>
      <h3 *ngIf="hasErrorLoading">
        {{ "components-media-error-loading-image" | translate }}
      </h3>
    </figure>
    <div
      [ngClass]="{
        showBodyOnHover: showBodyOnHover,
        'fade-in': showBodyOnHover
      }"
      class="card card-body glass shadow-none overflow-hidden"
    >
      <h2 class="card-title">{{ title }}</h2>
      <p *ngIf="description">{{ description }}</p>
      <div *ngIf="buttonLabel" class="card-actions justify-end">
        <button (click)="onClickButton()" class="btn btn-primary">
          {{ buttonLabel + " ❯ " }}
        </button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="modalOpened" [ngClass]="{ modalOpened: modalOpened }" class="modal">
  <figure (click)="onClickMedia()" class="min-w-min min-h-[10rem] relative">
    <div
      *ngIf="!hasLoadedFullMedia"
      class="flex flex-row gap-4 items-center absolute top-2/4 left-1/2 transform -translate-x-1/2"
    >
      <progress
        class="progress progress-success min-w-[10rem] max-w-xs"
      ></progress>

      <label (click)="onClickCloseMedia()" class="btn btn-sm btn-circle"
        >✕</label
      >
    </div>

    <img
      (error)="onErrorLoading(true)"
      (load)="onLoadFullMedia(true)"
      [alt]="description"
      [src]="imageUrl"
      class="max-w-[95vw] max-h-[95vh] object-cover m-auto"
    />

    <label
      (click)="onClickCloseMedia()"
      *ngIf="hasLoadedFullMedia"
      class="btn btn-sm btn-circle absolute right-2 top-2"
      >✕</label
    >
  </figure>
</div>
